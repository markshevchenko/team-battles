\documentclass[a4paper,10pt]{article}
\usepackage[russian]{babel}
\usepackage{fontspec}
\usepackage{nopageno}
\setmainfont{DejaVu Serif}

\begin{document}

\section*{Задача для красных (кодирование)}

Реализовать кодировщик ASCII-изображений.

Для кодирования используем вымышленный автомат, состоящий из экрана и пера, которое умеет выполнять команды. Команда перемещения пера состоит из буквы \textbf{U}, \textbf{R}, \textbf{D} или \textbf{L}, сразу за которой может следовать одна или больше цифр, например, \textbf{U}, \textbf{R5}, \textbf{D12}, \textbf{L203} — команды перемещения. Команда \textbf{U} означает перемещение пера на одну клетку вверх, \textbf{R} — вправо, \textbf{D} — вниз и \textbf{L} — влево. Число показывает, сколько раз надо повторить команду, \textbf{R5} означает перемещение пера на пять клеток вправо.

Команда печати состоит из буквы \textbf{P}, сразу за которой следует ровно один печатный ASCII-символ. Например, \textbf{P1}, \textbf{Pa}, \textbf{P*} — команды печати.

Экран — это прямоугольная область, состоящая из клеток, в каждой из которых может быть напечатан ASCII-символ. В начале работы программы все клетки экрана пустые (содержат пробел), а перо находится в левом верхнем углу. Программа должна по готовому изображению построить набор команд для автомата. Программа получает на вход ASCII-изображение, содержащие печатные ASCII-символы. Каждая строка изображения соответствует одной входной строке. Правый край не обязательно будет ровным, то есть ширина строк может различаться. Некоторые строки могут быть пустыми.

Пример входа программы:

\texttt{ \\
\\
\ \ \ ***\\
\ \ \ *\ *\\
\ \ \ ***\\
\\
}

В примере на экране нарисован квадрат размером $3\times 3$. На вход подаются пять строк, первая и пятая пустые.

Программа должна определить размеры экрана (в данном случае высота и ширина равны $5\times 6$), и закодировать изображение с помощью команд. Программа-кодировщик печатает в отдельных строках высоту и ширину экрана, и затем — в третьей строке — код. Код состоит из команд, которые записаны друг за другом без разделителей.

Пример вывода программы:

\texttt{ \\
5\\
6\\
DR3P*RP*RP*DP*DP*LP*LP*UP*}
\end{document}
